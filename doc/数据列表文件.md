# 数据列表文件

### 作用：

在训练或测试时，使用者向程序提供两个参数，一个是数据文件所在的文件夹路径`data_dir_path`，另一个是数据列表文件路径`data_list_path`，程序根据列表按需取用数据

### 命名：

* `子数据集_序列.txt`
* 示例
  * text_train.txt
  * text_val.txt
  * clipart_train.txt
  * sketch_val.txt

### 内容：

* 每一行是一个数据文件名，数据文件名根据宇航学长的规则

* 路径

* 数据文件命名（宇航学长的规则）：

  * `子数据集_编号_标签.扩展名`
  * 示例：
    * text_0000001273_0.txt
    * text_0000001273_0.npy
    * clipart_000000002427_54.jpg

* 示例：

  * text_train.txt

  ```
  text_0000001273_0.npy
  text_0000001277_0.npy
  text_0000001278_0.npy
  text_0000007936_1.npy
  text_0000007938_1.npy
  text_0000007939_1.npy
  ```

  * clipart_val.txt

  ```
  clipart_000000005862_91.jpg
  clipart_000000005864_91.jpg
  clipart_000000010903_92.jpg
  ```

### 总体使用示例

```python
text_loader = TextLoader(data_dir_path='/home/yzhq/cmplaces/processed/text',
                         data_list_path='/home/yzhq/cmplaces/text_train.txt',
                         batch_size=256)
```

假设`text_train.txt`内容如下

```
text_0000001273_0.npy
text_0000001277_0.npy
text_0000001278_0.npy
text_0000007936_1.npy
text_0000007938_1.npy
text_0000007939_1.npy
```

那么将会被读取的文件为：

```
/home/yzhq/cmplaces/processed/text/text_0000001273_0.npy
/home/yzhq/cmplaces/processed/text/text_0000001277_0.npy
/home/yzhq/cmplaces/processed/text/text_0000001278_0.npy
/home/yzhq/cmplaces/processed/text/text_0000007936_1.npy
/home/yzhq/cmplaces/processed/text/text_0000007938_1.npy
/home/yzhq/cmplaces/processed/text/text_0000007939_1.npy
```

在训练过程中，程序可以通过调用`text_loader.next_batch()`来一批一批的获取数据

我会多线程读取文件，所以读写的开销应该是很小的，不用担心效率问题